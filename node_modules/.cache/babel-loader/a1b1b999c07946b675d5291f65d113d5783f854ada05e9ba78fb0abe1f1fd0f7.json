{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport * as echarts from \"echarts\";\nimport { mapGetters } from \"vuex\";\nexport default {\n  name: \"DiscountedConsumption\",\n  data() {\n    return {\n      myChart: null,\n      options: [],\n      value: \"\"\n    };\n  },\n  computed: {\n    ...mapGetters(\"todolist\", [\"getFinishedTodos\", \"getStepsTodos\"]),\n    PlotXAxis(difference) {\n      forEa;\n    }\n  },\n  methods: {\n    getAdjustTodoArray() {\n      for (let i = 0; i < this.getStepsTodos.length; i++) {\n        const value = this.getStepsTodos[i].id;\n        const label = this.getStepsTodos[i].todoThing.title;\n        const obj = {\n          value: value,\n          label: label\n        };\n        this.options.push(obj);\n      }\n    },\n    // 输入时间戳，输出格式化后的日期，例如 \"10月16日\"\n    timestampToMonthDay(timestamp) {\n      const date = new Date(timestamp);\n      const month = date.getMonth() + 1; // 月份从 0 到 11，所以需要加 1\n      const day = date.getDate();\n      return `${month}月${day}日`;\n    },\n    // 输入两个时间戳，计算两个事件戳自己的差异\n    getDaysDifference(timestamp1, timestamp2) {\n      // 将时间戳转化为日期对象\n      const date1 = new Date(timestamp1);\n      const date2 = new Date(timestamp2);\n      // 计算毫秒差异\n      const timeDifference = date2 - date1;\n      // 将毫秒差异转化为天数\n      const daysDifference = Math.floor(timeDifference / (1000 * 60 * 60 * 24));\n      return daysDifference;\n    }\n  },\n  watch: {\n    value: {\n      handler(newValue) {\n        //newValue是todos的id\n        this.getStepsTodos.forEach(item => {\n          if (newValue == item.id) {\n            const deadlineTimestamp = item.todoThing.deadline; // 你的时间戳\n            const startTimestamp = item.todoThing.startTime; // 你的时间戳\n            // 将时间戳转化为日期时间\"XX年XX月XX日\"\n            const formattedDate = this.timestampToMonthDay(deadlineTimestamp);\n            // 差异\n            const difference = this.getDaysDifference(startTimestamp, deadlineTimestamp);\n            this.PlotXAxis(difference);\n          }\n        });\n      }\n    }\n  },\n  mounted() {\n    this.getAdjustTodoArray();\n    // 使用 ECharts 初始化图表\n    // this.myChart = echarts.init(this.$el);\n    this.myChart = echarts.init(this.$el.querySelector(\"#echarts-chart\"));\n    // 配置选项\n    const option = {\n      xAxis: {\n        type: \"category\",\n        // data: [\"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\", \"Sun\"],\n        data: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]\n      },\n      yAxis: {\n        type: \"value\",\n        show: true\n      },\n      /*    series中的第一个折线，表示自己的任务折线，\r\n      直接根据step量和天数规划出来\r\n      \r\n       */\n      series: [{\n        data: [100, 98, 70, 50, 40, 30, 0],\n        type: \"line\",\n        smooth: false\n      }, {\n        data: [100, 98, 70, 50, 40, 30, 0],\n        type: \"line\",\n        smooth: false\n      }]\n    };\n    // 设置图表选项\n    this.myChart.setOption(option);\n    // 为确保图表在窗口大小变化时自适应，请添加以下代码：\n    window.addEventListener(\"resize\", () => {\n      this.myChart.resize();\n    });\n  },\n  beforeDestroy() {\n    // 在组件销毁前销毁图表实例\n    if (this.myChart) {\n      this.myChart.dispose();\n    }\n  }\n};","map":{"version":3,"names":["echarts","mapGetters","name","data","myChart","options","value","computed","PlotXAxis","difference","forEa","methods","getAdjustTodoArray","i","getStepsTodos","length","id","label","todoThing","title","obj","push","timestampToMonthDay","timestamp","date","Date","month","getMonth","day","getDate","getDaysDifference","timestamp1","timestamp2","date1","date2","timeDifference","daysDifference","Math","floor","watch","handler","newValue","forEach","item","deadlineTimestamp","deadline","startTimestamp","startTime","formattedDate","mounted","init","$el","querySelector","option","xAxis","type","yAxis","show","series","smooth","setOption","window","addEventListener","resize","beforeDestroy","dispose"],"sources":["src/pages/DiscountedConsumption.vue"],"sourcesContent":["<script>\r\nimport * as echarts from \"echarts\";\r\nimport { mapGetters } from \"vuex\";\r\n\r\nexport default {\r\n  name: \"DiscountedConsumption\",\r\n  data() {\r\n    return {\r\n      myChart: null,\r\n      options: [],\r\n      value: \"\",\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapGetters(\"todolist\", [\"getFinishedTodos\", \"getStepsTodos\"]),\r\n    PlotXAxis(difference){\r\n      forEa\r\n      \r\n    }\r\n  },\r\n  methods: {\r\n    getAdjustTodoArray() {\r\n      for (let i = 0; i < this.getStepsTodos.length; i++) {\r\n        const value = this.getStepsTodos[i].id;\r\n        const label = this.getStepsTodos[i].todoThing.title;\r\n        const obj = { value: value, label: label };\r\n        this.options.push(obj);\r\n      }\r\n    },\r\n    // 输入时间戳，输出格式化后的日期，例如 \"10月16日\"\r\n    timestampToMonthDay(timestamp) {\r\n      const date = new Date(timestamp);\r\n      const month = date.getMonth() + 1; // 月份从 0 到 11，所以需要加 1\r\n      const day = date.getDate();\r\n      return `${month}月${day}日`;\r\n    },\r\n    // 输入两个时间戳，计算两个事件戳自己的差异\r\n    getDaysDifference(timestamp1, timestamp2) {\r\n      // 将时间戳转化为日期对象\r\n      const date1 = new Date(timestamp1);\r\n      const date2 = new Date(timestamp2);\r\n      // 计算毫秒差异\r\n      const timeDifference = date2 - date1;\r\n      // 将毫秒差异转化为天数\r\n      const daysDifference = Math.floor(timeDifference / (1000 * 60 * 60 * 24));\r\n      return daysDifference;\r\n    },\r\n    \r\n  },\r\n  watch: {\r\n    value: {\r\n      handler(newValue) {\r\n        //newValue是todos的id\r\n        this.getStepsTodos.forEach((item) => {\r\n          if (newValue == item.id) {\r\n            const deadlineTimestamp = item.todoThing.deadline; // 你的时间戳\r\n            const startTimestamp = item.todoThing.startTime; // 你的时间戳\r\n            // 将时间戳转化为日期时间\"XX年XX月XX日\"\r\n            const formattedDate = this.timestampToMonthDay(deadlineTimestamp);\r\n            // 差异\r\n            const difference = this.getDaysDifference(\r\n              startTimestamp,\r\n              deadlineTimestamp\r\n            );\r\n            this.PlotXAxis(difference)\r\n          }\r\n        });\r\n      },\r\n    },\r\n  },\r\n  mounted() {\r\n    this.getAdjustTodoArray();\r\n    // 使用 ECharts 初始化图表\r\n    // this.myChart = echarts.init(this.$el);\r\n    this.myChart = echarts.init(this.$el.querySelector(\"#echarts-chart\"));\r\n    // 配置选项\r\n    const option = {\r\n      xAxis: {\r\n        type: \"category\",\r\n        // data: [\"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\", \"Sun\"],\r\n        data: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10],\r\n      },\r\n      yAxis: {\r\n        type: \"value\",\r\n        show: true,\r\n      },\r\n      /*    series中的第一个折线，表示自己的任务折线，\r\n   直接根据step量和天数规划出来\r\n\r\n\r\n\r\n\r\n       */\r\n      series: [\r\n        {\r\n          data: [100, 98, 70, 50, 40, 30, 0],\r\n          type: \"line\",\r\n          smooth: false,\r\n        },\r\n        {\r\n          data: [100, 98, 70, 50, 40, 30, 0],\r\n          type: \"line\",\r\n          smooth: false,\r\n        },\r\n      ],\r\n    };\r\n    // 设置图表选项\r\n    this.myChart.setOption(option);\r\n    // 为确保图表在窗口大小变化时自适应，请添加以下代码：\r\n    window.addEventListener(\"resize\", () => {\r\n      this.myChart.resize();\r\n    });\r\n  },\r\n\r\n  beforeDestroy() {\r\n    // 在组件销毁前销毁图表实例\r\n    if (this.myChart) {\r\n      this.myChart.dispose();\r\n    }\r\n  },\r\n};\r\n</script>\r\n\r\n<template>\r\n  <div>\r\n    <div class=\"selector\">\r\n      <el-select v-model=\"value\" filterable placeholder=\"请选择\">\r\n        <el-option\r\n          v-for=\"item in options\"\r\n          :key=\"item.value\"\r\n          :label=\"item.label\"\r\n          :value=\"item.value\"\r\n        >\r\n        </el-option>\r\n      </el-select>\r\n    </div>\r\n    <div id=\"echarts-chart\" style=\"width: 100%; height: 400px\"></div>\r\n  </div>\r\n</template>\r\n\r\n<style scoped>\r\n</style>"],"mappings":";AACA,YAAAA,OAAA;AACA,SAAAC,UAAA;AAEA;EACAC,IAAA;EACAC,KAAA;IACA;MACAC,OAAA;MACAC,OAAA;MACAC,KAAA;IACA;EACA;EACAC,QAAA;IACA,GAAAN,UAAA;IACAO,UAAAC,UAAA;MACAC,KAAA;IAEA;EACA;EACAC,OAAA;IACAC,mBAAA;MACA,SAAAC,CAAA,MAAAA,CAAA,QAAAC,aAAA,CAAAC,MAAA,EAAAF,CAAA;QACA,MAAAP,KAAA,QAAAQ,aAAA,CAAAD,CAAA,EAAAG,EAAA;QACA,MAAAC,KAAA,QAAAH,aAAA,CAAAD,CAAA,EAAAK,SAAA,CAAAC,KAAA;QACA,MAAAC,GAAA;UAAAd,KAAA,EAAAA,KAAA;UAAAW,KAAA,EAAAA;QAAA;QACA,KAAAZ,OAAA,CAAAgB,IAAA,CAAAD,GAAA;MACA;IACA;IACA;IACAE,oBAAAC,SAAA;MACA,MAAAC,IAAA,OAAAC,IAAA,CAAAF,SAAA;MACA,MAAAG,KAAA,GAAAF,IAAA,CAAAG,QAAA;MACA,MAAAC,GAAA,GAAAJ,IAAA,CAAAK,OAAA;MACA,UAAAH,KAAA,IAAAE,GAAA;IACA;IACA;IACAE,kBAAAC,UAAA,EAAAC,UAAA;MACA;MACA,MAAAC,KAAA,OAAAR,IAAA,CAAAM,UAAA;MACA,MAAAG,KAAA,OAAAT,IAAA,CAAAO,UAAA;MACA;MACA,MAAAG,cAAA,GAAAD,KAAA,GAAAD,KAAA;MACA;MACA,MAAAG,cAAA,GAAAC,IAAA,CAAAC,KAAA,CAAAH,cAAA;MACA,OAAAC,cAAA;IACA;EAEA;EACAG,KAAA;IACAjC,KAAA;MACAkC,QAAAC,QAAA;QACA;QACA,KAAA3B,aAAA,CAAA4B,OAAA,CAAAC,IAAA;UACA,IAAAF,QAAA,IAAAE,IAAA,CAAA3B,EAAA;YACA,MAAA4B,iBAAA,GAAAD,IAAA,CAAAzB,SAAA,CAAA2B,QAAA;YACA,MAAAC,cAAA,GAAAH,IAAA,CAAAzB,SAAA,CAAA6B,SAAA;YACA;YACA,MAAAC,aAAA,QAAA1B,mBAAA,CAAAsB,iBAAA;YACA;YACA,MAAAnC,UAAA,QAAAqB,iBAAA,CACAgB,cAAA,EACAF,iBACA;YACA,KAAApC,SAAA,CAAAC,UAAA;UACA;QACA;MACA;IACA;EACA;EACAwC,QAAA;IACA,KAAArC,kBAAA;IACA;IACA;IACA,KAAAR,OAAA,GAAAJ,OAAA,CAAAkD,IAAA,MAAAC,GAAA,CAAAC,aAAA;IACA;IACA,MAAAC,MAAA;MACAC,KAAA;QACAC,IAAA;QACA;QACApD,IAAA;MACA;MACAqD,KAAA;QACAD,IAAA;QACAE,IAAA;MACA;MACA;AACA;;;MAMAC,MAAA,GACA;QACAvD,IAAA;QACAoD,IAAA;QACAI,MAAA;MACA,GACA;QACAxD,IAAA;QACAoD,IAAA;QACAI,MAAA;MACA;IAEA;IACA;IACA,KAAAvD,OAAA,CAAAwD,SAAA,CAAAP,MAAA;IACA;IACAQ,MAAA,CAAAC,gBAAA;MACA,KAAA1D,OAAA,CAAA2D,MAAA;IACA;EACA;EAEAC,cAAA;IACA;IACA,SAAA5D,OAAA;MACA,KAAAA,OAAA,CAAA6D,OAAA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}